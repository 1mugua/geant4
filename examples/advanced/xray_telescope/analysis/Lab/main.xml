<gui>
 <create exec="tcl">
   source $env(ONXHOME)/user/init.tcl;
   source $env(ONXHOME)/user/ui.tcl;
   source $env(LABHOME)/user/init.tcl;
   delete v;
   IViewer v -this [ui getCurrentViewer];
   v set pageTitle "XrayTel";
   v set page "2 1";
   v set region 2;
   v set cloudContext "modeling cloud color blue markerStyle cross markerSize 10";
   v set region 1;
   ui synchronize;
   #out disable;
 </create>

<widget>
  <class>Window</class>
  <name>consoleWindow</name>
  <geometry>500x300-0+0</geometry>
  <title>OnX/Console</title>
  <show>no</show>
  <widget>
    <class>VBox</class> 
    <widget>
      <class>ScrolledText</class>
      <name>consoleText</name>
    </widget>
    <widget>
      <class>Entry</class>
      <name>consoleEntry</name>
      <prompt>tcl></prompt>
      <activate exec="tcl">ui execute "[ui getResource consoleEntry prompt] [ui getValue consoleEntry]"</activate>
    </widget>
  </widget>

</widget>

<widget>
  <class>Window</class>
  <geometry>500x500+0+0</geometry>
  <title>Lab/Main</title>
  <!-- //////////////////////////////////// -->
  <widget>
    <class>VBox</class>
    <widget>
      <class>MenuBar</class>
      <name>menuBar</name>
      <widget> <!-- /////////// File /////////// -->
        <class>CascadeButton</class>
	<label>File</label>
        <widget>
          <class>Menu</class>
          <widget> <!-- File / Console -->
            <class>MenuItem</class>
	    <label>Console</label>
	    <activate exec="tcl"> ui show consoleWindow </activate>
          </widget>
          <widget> <!-- File / Exec tcl... -->
            <class>MenuItem</class>
	    <label>Exec tcl...</label>
	    <activate exec="tcl"> setTclFileChooser;ui show fileChooser </activate>
          </widget>
          <widget> <!-- File / session.tcl... -->
            <class>MenuItem</class>
	    <label>session.tcl</label>
	    <activate exec="tcl"> source session.tcl </activate>
          </widget>
          <widget> <!-- File / Exec cint... -->
            <class>MenuItem</class>
	    <label>Exec cint...</label>
	    <activate exec="tcl"> setCintFileChooser;ui show fileChooser </activate>
          </widget>
          <widget> <!-- File / Exec kumac... -->
            <class>MenuItem</class>
	    <label>Exec kumac...</label>
	    <activate exec="tcl"> setKuipFileChooser;ui show fileChooser </activate>
          </widget>
          <widget> <!-- File / session.kumac... -->
            <class>MenuItem</class>
	    <label>session.kumac</label>
	    <create exec="kuip"> /LIB/LOAD LABLIBLABKUIPWRAP LabKuip </create>
	    <activate exec="kuip"> exec session </activate>
          </widget>
          <widget> <!-- File / Out -->
            <class>MenuItem</class>
	    <label>stdout</label>
	    <activate exec="tcl"> out disable </activate>
          </widget>
          <widget> <!-- File / Continue -->
            <class>MenuItem</class>
	    <label>Continue</label>
            <!-- set a create callback to restore a tcl prompt 
                 changed to kuip by the previous one -->
	    <create exec="tcl"> ui setPrompt tcl> </create>
	    <activate exec="tcl"> ui exit </activate>
          </widget>
          <widget> <!-- File / Exit -->
            <class>MenuItem</class>
	    <label>Exit</label>
	    <activate exec="tcl"> ui exit </activate>
          </widget>
        </widget>
      </widget>

      <widget> <!-- /////////// Viewer /////////// -->
        <class>CascadeButton</class>
	<label>Viewer</label>
        <widget>
          <class>Menu</class>
          <widget> <!-- Viewer / next -->
            <class>MenuItem</class>
	    <label>next</label>
	    <activate exec="tcl"> Do3 set region next </activate>
          </widget>
          <widget> <!-- Viewer / 1x1 -->
            <class>MenuItem</class>
	    <label>1x1</label>
	    <activate exec="tcl"> Do3 page 1 1</activate>
          </widget>
          <widget> <!-- Viewer / 2x2 -->
            <class>MenuItem</class>
	    <label>2x2</label>
	    <activate exec="tcl"> Do3 page 2 2</activate>
          </widget>
          <widget> <!-- Viewer / 1x2 -->
            <class>MenuItem</class>
	    <label>1x2</label>
	    <activate exec="tcl"> Do3 page 1 2</activate>
          </widget>
          <widget> <!-- Viewer / 2x1 -->
            <class>MenuItem</class>
	    <label>2x1</label>
	    <activate exec="tcl"> Do3 page 2 1</activate>
          </widget>
          <widget> <!-- Viewer / region page -->
            <class>MenuItem</class>
	    <label>Region page</label>
	    <activate exec="tcl"> Do3 set region page</activate>
          </widget>
          <widget> <!-- Viewer / 2D -->
            <class>MenuItem</class>
	    <label>2D</label>
	    <activate exec="tcl"> Do3 set viewing 2D </activate>
          </widget>
          <widget> <!-- Viewer / 3D -->
            <class>MenuItem</class>
	    <label>3D</label>
	    <activate exec="tcl"> Do3 set viewing 3D </activate>
          </widget>
          <widget> <!-- Viewer / black -->
            <class>MenuItem</class>
	    <label>Black back</label>
	    <activate exec="tcl"> Do3 set regionColor "0 0 0" </activate>
          </widget>
          <widget> <!-- Viewer / white -->
            <class>MenuItem</class>
	    <label>White back</label>
	    <activate exec="tcl"> Do3 set regionColor "1 1 1" </activate>
          </widget>
          <widget> <!-- Viewer / grey -->
            <class>MenuItem</class>
	    <label>Grey back</label>
	    <activate exec="tcl"> Do3 set regionColor "0.8 0.8 0.8" </activate>
          </widget>
          <widget> <!-- Viewer / viewAll -->
            <class>MenuItem</class>
	    <label>view all</label>
	    <activate exec="tcl"> Do1 viewAll </activate>
          </widget>
          <widget> <!-- Viewer / PS vec -->
            <class>MenuItem</class>
	    <label>PS vec</label>
	    <activate exec="tcl"> Do2 producePS out.ps </activate>
          </widget>
          <widget> <!-- Viewer / PS pix -->
            <class>MenuItem</class>
	    <label>PS pix</label>
	    <activate exec="tcl"> Do3 writeImage out.ps PostScript </activate>
          </widget>
          <widget> <!-- Viewer / gv -->
            <class>MenuItem</class>
	    <label>gv</label>
	    <activate exec="tcl"> exec ghostview out.ps </activate>
          </widget>
          <widget> <!-- Viewer / GIF -->
            <class>MenuItem</class>
	    <label>GIF</label>
	    <activate exec="tcl"> Do3 writeImage out.gif GIF </activate>
          </widget>
          <widget> <!-- Viewer / xv -->
            <class>MenuItem</class>
	    <label>xv</label>
	    <activate exec="tcl"> exec xv out.gif </activate>
          </widget>
          <widget> <!-- Viewer / reset page-->
            <class>MenuItem</class>
	    <label>reset page</label>
	    <activate exec="tcl"> Do2 reset page </activate>
          </widget>
          <widget> <!-- Viewer / erase page-->
            <class>MenuItem</class>
	    <label>erase page</label>
	    <activate exec="tcl"> Do2 erase page </activate>
          </widget>
          <widget> <!-- Plotter / reset region -->
            <class>MenuItem</class>
	    <label>reset region</label>
	    <activate exec="tcl"> Do2 reset region </activate>
          </widget>
          <widget> <!-- Plotter / erase region -->
            <class>MenuItem</class>
	    <label>erase region</label>
	    <activate exec="tcl"> Do2 erase region </activate>
          </widget>
          <widget> <!-- Viewer / erase static -->
            <class>MenuItem</class>
	    <label>erase static</label>
	    <activate exec="tcl"> Do2 erase static </activate>
          </widget>
          <widget> <!-- Viewer / erase dynamic -->
            <class>MenuItem</class>
	    <label>erase dynamic</label>
	    <activate exec="tcl"> Do2 erase dynamic </activate>
          </widget>
          <widget> <!-- Viewer / title -->
            <class>MenuItem</class>
	    <label>Page title on/off</label>
	    <activate exec="tcl"> Do2 toggle pageTitleVisible</activate>
          </widget>
          <widget> <!-- Viewer / autoClipping -->
            <class>MenuItem</class>
	    <label>auto clip on/off</label>
	    <activate exec="tcl"> Do2 toggle autoClipping </activate>
          </widget>
          <widget> <!-- Viewer / New -->
            <class>MenuItem</class>
	    <label>New</label>
	    <activate exec="tcl"> ui createViewer "" examiner</activate>
          </widget>
        </widget>
      </widget>

      <widget> <!-- /////////// Plotter /////////// -->
        <class>CascadeButton</class>
	<label>Plotter</label>
        <widget>
          <class>Menu</class>
          <widget> <!-- Plotter / v log -->
            <class>MenuItem</class>
	    <label>v log</label>
	    <activate exec="tcl"> Do2 toggle vAxisLogScale </activate>
          </widget>
          <widget> <!-- Plotter / log  -->
            <class>MenuItem</class>
	    <label>x log</label>
	    <activate exec="tcl"> Do2 toggle xAxisLogScale </activate>
          </widget>
          <widget> <!-- Plotter / wall -->
            <class>MenuItem</class>
	    <label>wall</label>
	    <activate exec="tcl"> Do2 toggle wallVisible </activate>
          </widget>
          <widget> <!-- Plotter / grid -->
            <class>MenuItem</class>
	    <label>grid</label>
	    <activate exec="tcl"> Do2 toggle gridVisible </activate>
          </widget>
          <widget> <!-- Plotter / innerFrame -->
            <class>MenuItem</class>
	    <label>innerFrame</label>
	    <activate exec="tcl"> Do2 toggle innerFrameVisible </activate>
          </widget>
          <widget> <!-- Plotter / infos -->
            <class>MenuItem</class>
	    <label>infos</label>
	    <activate exec="tcl"> Do2 toggle infosVisible </activate>
          </widget>
          <widget> <!-- Plotter / title -->
            <class>MenuItem</class>
	    <label>title</label>
	    <activate exec="tcl"> Do2 toggle titleVisible </activate>
          </widget>
          <widget> <!-- Plotter / title pos -->
            <class>MenuItem</class>
	    <label>title pos</label>
	    <activate exec="tcl"> Do2 toggle titleUp </activate>
          </widget>
          <widget> <!-- Plotter / errors -->
            <class>MenuItem</class>
	    <label>errors</label>
	    <activate exec="tcl"> Do2 toggle errorsVisible </activate>
          </widget>
          <widget> <!-- Plotter / superpose -->
            <class>MenuItem</class>
	    <label>superpose</label>
	    <activate exec="tcl"> Do2 toggle superposeHistograms </activate>
          </widget>
          <widget> <!-- Plotter / xy RAND -->
            <class>MenuItem</class>
	    <label>xy RAND</label>
	    <activate exec="tcl"> Do3 set xyModeling RANDOM </activate>
          </widget>
          <widget> <!-- Plotter / xy BOX -->
            <class>MenuItem</class>
	    <label>xy BOX</label>
	    <activate exec="tcl"> Do3 set xyModeling BOX </activate>
          </widget>
          <widget> <!-- Plotter / xy TEXT -->
            <class>MenuItem</class>
	    <label>xy TEXT</label>
	    <activate exec="tcl"> Do3 set xyModeling TEXT </activate>
          </widget>
          <widget> <!-- Plotter / xy COLOR -->
            <class>MenuItem</class>
	    <label>xy COLOR</label>
	    <activate exec="tcl"> Do3 set xyModeling COLOR </activate>
          </widget>
          <widget> <!-- Plotter / lego -->
            <class>MenuItem</class>
	    <label>lego</label>
	    <activate exec="tcl"> Lego </activate>
          </widget>
        </widget>
      </widget>

      <widget> <!-- /////////// Cint /////////// -->
        <class>CascadeButton</class>
	<label>Cint</label>
        <widget>
          <class>Menu</class>
          <widget>
            <class>MenuItem</class>
	    <label>gauss.cint</label>
            <activate exec="cint">x $LABHOME/examples/cint/gauss.cint</activate>
          </widget>
          <widget>
            <class>MenuItem</class>
	    <label>Gauss dump</label>
            <create exec="tcl">session load LABLIBLABCINTWRAP LabCint </create>
            <activate exec="cint">{
              ISession* session = OnXCintGetSession();
	      /* If on the stack, I have a crash at exit. */
              HCL_Histogram1D* hclHisto = new HCL_Histogram1D("",10,-5.,5.);
	      Lib_RandomGauss randomGauss;
              for(int count=0;count &lt; 1000;count++) {
	        hclHisto->fill(randomGauss.shoot());
	      }
              hclHisto->dump(session->out());
            }</activate>
          </widget>
        </widget>
      </widget>

      <widget> <!-- /////////// Viewers /////////// -->
        <class>CascadeButton</class>
	<label>Viewers</label>
        <widget>
          <class>Menu</class>
          <name>viewers</name>
        </widget>
      </widget>

    </widget>
    <widget>
      <class>Viewer</class>
      <name>OnX/Main/Viewer</name>
    </widget>
  </widget>

  <widget>
    <class>FileSelection</class>
    <name>fileChooser</name>
    <title>File selection</title>
    <show>no</show>
  </widget>

</widget>

</gui>
